<div class="row">
  <div class="col-lg-8 mb-4 order-0">
    <div class="card">
      <div class="d-flex align-items-end row waywas">
        <div class="col-sm-7">
          <div class="card-body">
            <h5 class="card-title text-primary">
              Welcome Dr. {{ Doct.person?.firstName! }}
              {{ Doct.person?.lastName! }}! ðŸŽ‰
            </h5>
            <p class="mb-4">
              You have <span class="fw-bold">{{ RVs.length! }}</span> upcoming
              {{ RVs.length == 1 ? "appointment" : "appointments" }} this month.
            </p>

            <a
              href="javascript:;"
              routerLink="/doctor/appointments"
              class="btn btn-sm btn-outline-primary apppoi"
              >View Upcoming Appointments</a
            >
          </div>
        </div>
        <div class="col-sm-5 text-center text-sm-left">
          <div class="card-body pb-0 px-0 px-md-4">
            <img
              *ngIf="Doct.person?.gender! === 'male'"
              src="https://www.drchrono.com/site_media/images/main.5447d221549a.png"
              height="140"
              alt="View Badge User"
              data-app-dark-img="illustrations/man-with-laptop-dark.png"
              data-app-light-img="illustrations/man-with-laptop-light.png"
            />
            <img
              *ngIf="Doct.person?.gender! === 'female'"
              src="https://cdni.iconscout.com/illustration/premium/thumb/health-diseases-guide-2245462-1892308.png"
              height="140"
              alt="View Badge User"
              data-app-dark-img="illustrations/man-with-laptop-dark.png"
              data-app-light-img="illustrations/man-with-laptop-light.png"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-4 order-1">
    <div class="row">
      <div class="col-lg-6 col-md-12 col-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div
              class="card-title d-flex align-items-start justify-content-between"
            >
              <div class="avatar flex-shrink-0">
                <img
                  src="assets/t2/img/icons/unicons/chart-success.png"
                  alt="chart success"
                  class="rounded"
                />
              </div>
            </div>
            <span class="fw-semibold d-block mb-3">Today</span>
            <h3 class="card-title mb-3">{{ RVsToday.length! }} Appointments</h3>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-md-12 col-6 mb-4">
        <div class="card">
          <div class="card-body">
            <div
              class="card-title d-flex align-items-start justify-content-between"
            >
              <div class="avatar flex-shrink-0">
                <img
                  src="assets/t2/img/icons/unicons/wallet-info.png"
                  alt="chart success"
                  class="rounded"
                />
              </div>
            </div>
            <span class="fw-semibold d-block mb-3">Price</span>
            <h6 class="text-dark mb-3">{{ Doct.price! }} DT /Appointment</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-lg-4 order-0">
    <div class="card">
      <div class="d-flex align-items-end row waywax">
        <div class="card-body">
          <h5 class="card-title text-primary">Availability</h5>
          <mat-card class="demo-inline-calendar-card">
            <mat-calendar
              [(selected)]="selected"
              (selectedChange)="onValueChange(selected)"
            ></mat-calendar>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-8 order-0 notAv">
    <div class="card">
      <div class="d-flex align-items-end row waywas">
        <div class="card-body" *ngIf="availability == undefined">
          <div class="nomatches text-center">
            <h5 class="card-title text-primary">No Calendar For This Date !</h5>
            <img
              src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc3IiBoZWlnaHQ9IjIxMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zMi41OTcuMjUzaDEyMy4xOGMxMS4wOTIgMCAyMC4wODQgOC45OTIgMjAuMDg0IDIwLjA4NHYxMTUuMTQ2YzAgMTEuMDkyLTguOTkyIDIwLjA4NC0yMC4wODQgMjAuMDg0SDMyLjU5N2MtMTEuMDkyIDAtMjAuMDgzLTguOTkyLTIwLjA4My0yMC4wODRWMjAuMzM3QzEyLjUxNCA5LjI0NSAyMS41MDUuMjUzIDMyLjU5Ny4yNTN6IiBmaWxsPSIjMDA5NDg1Ii8+PHBhdGggZD0iTTE0LjY5OSA5LjgyOGgxMzYuNTY5YzcuMzk0IDAgMTMuMzg5IDUuOTk1IDEzLjM4OSAxMy4zOXYxMjguNTM1YzAgNy4zOTUtNS45OTUgMTMuMzktMTMuMzkgMTMuMzlIMTQuN2MtNy4zOTUgMC0xMy4zOS01Ljk5NS0xMy4zOS0xMy4zOVYyMy4yMThjMC03LjM5NSA1Ljk5NS0xMy4zOSAxMy4zOS0xMy4zOXoiIGZpbGw9IiNGRkYiLz48ZyBmaWxsPSIjRTZGN0Y1Ij48cGF0aCBkPSJNMTEuOTggMjIuNTIyaDEzNi41Njh2MTMuMTI1SDExLjk4ek0xMi4yNjggNzcuODYyaDEzNi41Njl2Mi45MjRIMTIuMjY3ek0xMi4yNjggODguMDk1aDEzNi41Njl2Mi45MjRIMTIuMjY3ek0xMi4yNjggOTguMzI3aDEzNi41Njl2Mi45MjRIMTIuMjY3ek0xMi4yNjggMTA4LjU2aDEzNi41Njl2Mi45MjRIMTIuMjY3eiIvPjxnPjxwYXRoIGQ9Ik0xMi4yNjggNDYuMTVoMTM2LjU2OXYyLjkyNUgxMi4yNjd6TTEyLjI2OCA1Ni4zODRoMTM2LjU2OXYyLjkyNEgxMi4yNjd6TTEyLjI2OCA2Ni42MTZoMTM2LjU2OXYyLjkyNEgxMi4yNjd6Ii8+PC9nPjwvZz48Zz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NC42NDEgNTMuMjQpIj48cmVjdCBmaWxsPSIjQUM3REZEIiB0cmFuc2Zvcm09InJvdGF0ZSgtMjkuODczIDE1LjQ3NyAxOS4xNDMpIiB4PSIxNC42MTQiIHk9IjkuNjAzIiB3aWR0aD0iMS43MjciIGhlaWdodD0iMTkuMDgxIiByeD0iLjYzNyIvPjxyZWN0IGZpbGw9IiMwMDIzMzMiIHRyYW5zZm9ybT0icm90YXRlKC0yOS44NzYgMTUuMTggMTkuMzE2KSIgeD0iMTQuMzE2IiB5PSI5Ljc3NCIgd2lkdGg9IjEuNzI3IiBoZWlnaHQ9IjE5LjA4NCIgcng9Ii42MzciLz48ZWxsaXBzZSBmaWxsPSIjMEUwMDhBIiB0cmFuc2Zvcm09InJvdGF0ZSgtMjkuODc2IDEwLjE2MSAxMC4xOSkiIGN4PSIxMC4xNjEiIGN5PSIxMC4xOSIgcng9IjYuNzU4IiByeT0iNy4wNTIiLz48ZWxsaXBzZSBmaWxsPSIjRkFGQ0ZCIiB0cmFuc2Zvcm09InJvdGF0ZSgtMjkuODc2IDEwLjE2MSAxMC4xOSkiIGN4PSIxMC4xNjEiIGN5PSIxMC4xOTEiIHJ4PSI1LjcwMyIgcnk9IjUuOTUyIi8+PHBhdGggZD0iTTYuMDA2IDEyLjg4YS4zMDMuMzAzIDAgMDEtLjI2My0uMTUyIDUuMzgyIDUuMzgyIDAgMDEtLjU3NS0zLjk4OUE0Ljk2MyA0Ljk2MyAwIDAxNy41MiA1LjU5MWEuMzAzLjMwMyAwIDExLjMuNTI1Yy0xLjA0LjU5OS0xLjc4NyAxLjYtMi4wNjYgMi43NjhhNC43OCA0Ljc4IDAgMDAuNTE0IDMuNTQzLjMwMy4zMDMgMCAwMS0uMjYyLjQ1M3oiIGZpbGw9IiMwRTAwOEEiLz48L2c+PHBhdGggZD0iTTY2LjU5IDIwNi4wMDJsOC4xMTUgNS42NDVINTguNjUzdi01LjgyMXMyLjY0Ni01LjQ2OSA3LjkzOC4xNzZ6TTk2LjQwMSAyMDYuMDAybDguMTE1IDUuNjQ1SDg4LjQ2NHYtNS44MjFzMi42NDUtNS40NjkgNy45MzcuMTc2eiIgZmlsbD0iIzAwMjMzMyIvPjxwYXRoIGQ9Ik04MC42NDggMTMzLjQ0cy0uNDk0IDMxLjMyMi01LjIxNyAzOC4zNjRjLTYuMDE4IDguOTc0LTcuNDMgMjMuMjYyLTguOTA4IDM0LjE5OGwtOS41NjMtLjEzNXMtMS43MS0yMi4zOTYgNi4xMDMtMzMuNTU2YzEuMjM1LTEuNzY0IDIuNDc2LTE2Ljg4NSAxLjc3OC0yMC40NDlzLTQuNDM4LTEwLjg5OCAxLjAzOC0yMy43NzJjNS40NzYtMTIuODczIDE0Ljc2OSA1LjM1IDE0Ljc2OSA1LjM1eiIgZmlsbD0iIzE1RTdCNSIvPjxwYXRoIGQ9Ik04Ni4zNDcgMTI5LjYyM3M3LjgxMiAzMy4yNyA2Ljg4IDM4LjFjLTEuOTQxIDEwLjA1NSAxLjk0IDI4LjIyNCAyLjk5OCAzOC4xMDJIODYuMTdzLTguMzEtMjAuNDA2LTMuNTI3LTMzLjE2MmMxLjU4Ny00LjIzNC0zLjg4MS0xNy40NjQtNS42NDUtMjAuNjM4LTEuNzY0LTMuMTc0LTcuNTg1LTguOTk2LTYuMzUtMjIuOTMgMS4yMzUtMTMuOTM2IDE1LjY5OS41MjggMTUuNjk5LjUyOHoiIGZpbGw9IiMwMDk0ODUiLz48cGF0aCBkPSJNOTguODYgOTMuNTFsOC4xMzItMTYuMTg2IDQuMDM3LTUuODA4YS45MTQuOTE0IDAgMDExLjQzNS4wMDRsMi4yNTcgMi44NzJhLjkxNC45MTQgMCAwMS0uMTcgMS4yOTVsLTMuOTQ2IDIuOTczLTYuMzI4IDIwLjM5NGMtMS45NzUgMS41MjItNC44ODUuNTM1LTUuNDgzLTEuODg1LS4yMzItLjkzNi0uMjYtMi4xMzIuMDY3LTMuNjU4eiIgZmlsbD0iI0ZGRDVDMCIvPjxwYXRoIGZpbGw9IiMwQjAwNkMiIGQ9Ik04My42MTcgOTMuMTE4bDE2LjQ2NC0yLjM4OCAzLjk3NCA3Ljk0My0yNi40ODkgOC4wMzh6Ii8+PHBhdGggZD0iTTYwLjQxOCA5Ni44MTRsLTE2Ljc1OSAxNC44MTdjLS43NTMgMS4wMTUtLjgxMyA1LjQ5OC4yNzggNi4xMzdsMjEuOTQ4IDguNjh2LTUuNjQ1bC0xMS42NDItNy4yMzIgMy40My0yLjg5NWMzLjMyLTMuNTQxIDQuNzg2LTcuNTYgMy4yNTEtMTIuMTY1bC0uNTA2LTEuNjk3eiIgZmlsbD0iI0ZGRDVDMCIvPjxwYXRoIGQ9Ik01OS43MTEgOTQuODczTDQzLjY2IDExMS42MzFjLS43NTMgMS4wMTUtLjgxMyA1LjQ5OC4yNzggNi4xMzdsMTAuMzA2LTQuMTk3IDQuMjMzLTIuNjQ1YzMuMzItMy41NDIgMy45ODMtNy44MSAyLjQ0OC0xMi40MTVsLTEuMjEzLTMuNjM4eiIgZmlsbD0iIzBCMDA2QyIvPjxwYXRoIGQ9Ik03OC4xMjMgNzUuMnM0LjUzIDkuNjI2IDIuMDc2IDEwLjk0OGMtMi40NTQgMS4zMjEtNC4zNDEgMS4zMjEtNC4zNDEgMS4zMjFsLjc1NSA3LjU1cy02LjYwNyAyLjgzMi04LjQ5NC0xLjEzMmMwIDAgMi42NDMtNC4zNDEgMy4wMi03LjU1IDAgMC02LjA0LTEwLjM4MiA2Ljk4NC0xMS4xMzd6IiBmaWxsPSIjRkZENUMwIi8+PHBhdGggZD0iTTc2LjIzNiA4MS4wNTFzLTEuNTEtMS4xNTYtMS41MS0uMzc4YzAgLjk0NCAwIDIuNjQzIDEuNTEgMi44MzIgMCAwLTIuMDc3IDMuNzc1LTYuNzk2IDIuMjY1LTQuNzE5LTEuNTEtNC43Mi02Ljk4NC0uNTY2LTEwLjE5MyA0LjE1My0zLjIwOSA4LjQ5NC01LjQ3NCAxMS4xMzcuMzc4IDAgMC00LjM0MiAyLjgzMS0zLjc3NSA1LjA5NnoiIGZpbGw9IiMwMDIzMzMiLz48cGF0aCBkPSJNNTYuOTc3IDEwMC4yNmE3LjI1OSA3LjI1OSAwIDAxNy4yNjMtNi45NzRoMTkuMjg1YzIuMTE2IDAtMS41ODggMTYuNTguMTc2IDI1LjRzMy4xNzUgMTMuMDU0IDMuMTc1IDEzLjA1NGwtMjIuNzU1LjM1M3MtNy41NzgtMjAuMDYtNy4xNDQtMzEuODM0eiIgZmlsbD0iIzBCMDA2QyIvPjxwYXRoIGQ9Ik01NC4yNDMgMTEzLjU3MWwtOS40MzctMy4yMDRzLTIuMzgxLjkxMS0xLjU4OCAyLjU4N2MwIDAtMS4zMjIgMS4yNjQtLjA4OCAyLjI2MyAwIDAtLjg4MiAxLjUyOS44ODIgMi41ODdsMTAuODc4LTMuODUxcy0uMjk0LS41NTgtLjY0Ny0uMzgyek0xMDAuMTM0IDkwLjYwN3MtLjc1LS42MDQtMS4wNTEuMjI2YzAgMC0uNTg5LS41MzUtMS4yMzMuMTk4bDEuNTU5IDkuMTI4czEuMjMyLjcxMSAxLjY0My0uMjY0YzAgMCAuOTA3LjU3NCAxLjE4LS4wNzYgMCAwIDEuOTY5LS4xMjggMi4wOC0uODQ2IDAgMC0zLjkxLTkuMTE1LTQuMTc4LTguMzY2eiIgZmlsbD0iIzBFMDA4QSIvPjwvZz48L2c+PC9zdmc+"
              alt=""
              class="text-center mb-4"
            />
            <h4 class="text-danger mb-4">
              You Dont Have A Calendar For {{ selected | date }} !
            </h4>
            <h6 class="mb-4">Would You Like To Add One :3? Click Below</h6>
            <button
              class="btn btn-primary mb-4"
              (click)="createCalendar(selected)"
            >
              Add Schedule For {{ selected | date }}
            </button>
          </div>
        </div>
        <div class="card-body" *ngIf="availability !== undefined">
          <div class="nomatches text-center">
            <h5 class="card-title text-primary">
              Calender For {{ availability["date"] | date }}
            </h5>

            <ng-container
              *ngFor="let slot of availability['availability']"
              class="yolo"
            >
              <div class="slot-button" [ngClass]="{ 'is-left': slot.clicked }">
                <button
                  class="toggle-button"
                  [ngClass]="{
                    'btn btn-info': slot.isAvailable,
                    'btn btn-secondary': !slot.isAvailable
                  }"
                  (click)="toggleSlot(slot)"
                >
                  {{ slot.time }} : 00
                </button>
                <ng-container *ngIf="slot.clicked">
                  <mat-tooltip
                    matTooltipPosition="above"
                    [matTooltip]="
                      slot.isAvailable
                        ? 'Change to unavailable'
                        : 'Change to available'
                    "
                    class="pointer"
                    (click)="
                      updateAvailability({
                        date: availability['date'],
                        time: slot.time,
                        isAvailable: !slot.isAvailable
                      })
                    "
                  >
                    <mat-icon
                      class="icon"
                      [ngClass]="{
                        'close-icon': slot.isAvailable,
                        'check-icon': !slot.isAvailable
                      }"
                      color="{{ slot.isAvailable ? 'warn' : 'primary' }}"
                      aria-hidden="true"
                    >
                      {{ slot.isAvailable ? "close" : "check_circle_outline" }}
                    </mat-icon>
                  </mat-tooltip>
                </ng-container>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="row">
    <!-- Order Statistics -->
    <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
      <div class="card h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="d-flex flex-column align-items-center gap-1">
              <h5 class="my-4">Upcoming Appointments</h5>
            </div>
            <div id="orderStatisticsChart"></div>
          </div>


          <div  *ngIf="AllApoi.length==0">
            <h4 _ngcontent-iaw-c205="" class="text-danger mb-4" style="margin-top:80px;text-align: center;"> You Dont Have Any <br>  Upcoming Appointements
            <br>
            <br>
            <i class='bx bx-file text-danger' style=' margin-top: 10px;  font-size: 35px;'  ></i>
            </h4>
          </div>


          <ul class="p-0 m-0">
            <li class="d-flex mb-4 pb-1" *ngFor="let apoi of AllApoi">
              <div class="flex-shrink-0 me-3">
                <div class="waywa">
                  <img
                    class="avatar"
                    [src]="
                      apoi.Patient.person?.image !== null
                        ? apoi.Patient.person?.image!
                        : 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png'
                    "
                    [alt]="apoi.Patient.person?.firstName!"
                  />
                </div>
              </div>
              <div
                class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"
              >
                <div class="me-2">
                  <h6 class="mb-0">
                    {{ apoi.Patient.person?.firstName! }}
                    {{ apoi.Patient.person?.lastName! }}
                  </h6>
                  <small class="text-muted dateee">{{
                    apoi.dateRV | date
                  }}</small>
                </div>
                <div class="user-progress">
                  <small class="timee"
                    >{{ apoi.heureRV }}:00
                    {{ apoi.heureRV > 12 ? " PM" : " AM" }}</small
                  >
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!--/ Order Statistics -->
    <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
      <div class="card h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="d-flex flex-column align-items-center gap-1">
              <h5 class="my-4">Consultations</h5>
            </div>

         
  
            <div id="orderStatisticsChart"></div>
          </div>
          <div  *ngIf="consus.length==0">
            <h4 _ngcontent-iaw-c205="" class="text-danger mb-4" style="margin-top:80px;text-align: center;"> You Dont Have Any <br>   Consultations
            <br>
            <br>
            <i class='bx bxs-capsule text-danger' style=' margin-top: 10px;  font-size: 40px;'></i>
            </h4>
          </div>
          <ul class="p-0 m-0">
            <li class="d-flex mb-4 pb-1" *ngFor="let cons of consus">
              <div class="flex-shrink-0 me-3">
                <div class="waywa">
                  <img
                    class="avatar"
                    [src]="
                      cons.patientId.person?.image!== null
                        ? cons.patientId.person?.image!
                        : 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png'
                    "
                    [alt]="cons.patientId.person?.firstName!"
                  />
                </div>
              </div>
              <div
                class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"
              >
                <div class="me-2 desc">
                  <h6 class="mb-0">
                    {{ cons.patientId.person?.firstName! }}
                    {{ cons.patientId.person?.lastName! }}
                    {{ cons.patientId.bloodType! }}
                  </h6>
                  <small class="text-muted">{{ cons.marks }}</small>
                </div>
                <div class="user-progress">
                  <small class="timee">{{
                    cons.date | date : "dd/MM/yyyy"
                  }}</small>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Transactions -->
    <div class="col-md-6 col-lg-4 order-2 mb-4">
      <div class="row">
        <h5 class="my-4">Recent Medical Articles</h5>
        <div class="col-md">
          <div
            id="carouselExample"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <ol class="carousel-indicators">
              <li
                data-bs-target="#carouselExample"
                data-bs-slide-to="0"
                class="active"
              ></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="1"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="2"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="3"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="4"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="5"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="6"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="7"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="8"></li>
              <li data-bs-target="#carouselExample" data-bs-slide-to="9"></li>
            </ol>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <a [href]="articles[0].url" target="_blank">
                  <img
                    class="d-block carousel-img"
                    [src]="
                      articles[0].urlToImage ||
                      'https://wallpapertag.com/wallpaper/full/6/e/c/347101-white-background-hd-2633x1542-for-full-hd.jpg'
                    "
                    [alt]="articles[0].title"
                  />
                  <div class="carousel-caption d-none d-md-block text-dark">
                    <h3 class="text-dark fw-bold">{{ articles[0].title }}</h3>
                    <p>
                      {{ articles[0].description }}
                    </p>
                  </div>
                </a>
              </div>
              <div
                class="carousel-item"
                *ngFor="let artic of articles.slice(1)"
              >
                <a [href]="artic.url" target="_blank">
                  <img
                    class="d-block carousel-img"
                    [src]="
                      artic.urlToImage ||
                      'https://wallpapertag.com/wallpaper/full/6/e/c/347101-white-background-hd-2633x1542-for-full-hd.jpg'
                    "
                    [alt]="artic.title"
                  />
                  <div class="carousel-caption d-none d-md-block text-dark">
                    <h3 class="text-dark fw-bold">{{ artic.title }}</h3>
                    <p>{{ artic.description }}</p>
                  </div>
                </a>
              </div>
            </div>
            <a
              class="carousel-control-prev"
              href="#carouselExample"
              role="button"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </a>
            <a
              class="carousel-control-next"
              href="#carouselExample"
              role="button"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--/ Transactions -->
  </div>
</div>
